services:
  rancher:
    image: rancher/rancher:v2.10.1
    container_name: rancher-server # For easier log inspection on the host
    privileged: true 
    deploy:
      replicas: 1
      restart_policy:
        condition: any # Recommended for high availability/resilience
        delay: 5s 
        max_attempts: 3
    ports:
      - "8181:80"    # HTTP
      - "8443:443"   # HTTPS
    volumes:
      - rancher-data:/var/lib/rancher
    networks:
      - rancher-network
    # In Swarm, the top-level 'restart' is ignored; 'deploy: restart_policy' is used.

volumes:
  rancher-data:
    driver: local

networks:
  rancher-network:
    driver: overlay # Correct for Swarm
